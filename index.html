<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Tablet Swipe Pages</title>
  <link rel="stylesheet" href="style.css">
  <meta http-equiv="cache-control" content="public, max-age=3600">
</head>
<body>
  <div id="wrapper" class="wrapper">
    <iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vQK0HyLIxp4KQKdYdZj7LPo38OKeQG2sZ56SzJhahNGiQDMK3XlKpCxXdnUNyieD3m5GEebEfBWmHGs/pubhtml?gid=1046168270&single=true" loading="eager"></iframe>
    
    <iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vQK0HyLIxp4KQKdYdZj7LPo38OKeQG2sZ56SzJhahNGiQDMK3XlKpCxXdnUNyieD3m5GEebEfBWmHGs/pubhtml?gid=1343647753&single=true" loading="lazy"></iframe>
    
    <div class="redirect-slide" data-url="https://secured.sirvoy.com/calendar">
      <p style="text-align:center; font-size:2em; padding-top:40vh;">Redirecting to Sirvoy...</p>
    </div>
  </div>

  <div id="touch-layer"></div>

 <script>
    let xStart = null;
    let isDragging = false;
    let current = 0;
    const wrapper = document.getElementById("wrapper");
    const maxSlides = 2;
    const touchLayer = document.getElementById("touch-layer");
    const slides = document.querySelectorAll(".wrapper > *");
  
    function handleStart(x) {
      xStart = x;
      isDragging = true;
    }
  
    function handleMove(x) {
      if (!isDragging || xStart === null) return;
      const xDiff = xStart - x;
  
      if (Math.abs(xDiff) > 50) {
        if (xDiff > 0 && current < maxSlides) {
          current++;
        } else if (xDiff < 0 && current > 0) {
          current--;
        }
  
        wrapper.style.transform = `translateX(-${current * 100}vw)`;
        xStart = null;
        isDragging = false;
        redirectIfNeeded(current);
      }
    
      // Lazy-load iframe when it becomes visible
      const slide = slides[current];
      const iframe = slide.tagName === "IFRAME" ? slide : slide.querySelector("iframe");
      if (iframe && iframe.dataset.src && !iframe.src) {
        iframe.src = iframe.dataset.src;
      }
    }
  
    function redirectIfNeeded(index) {
      const el = slides[index];
      if (el.classList.contains("redirect-slide")) {
        window.location.href = el.getAttribute("data-url");
      }
    }
  
    // Touch support
    touchLayer.addEventListener("touchstart", (e) => handleStart(e.touches[0].clientX), { passive: true });
    touchLayer.addEventListener("touchmove", (e) => handleMove(e.touches[0].clientX), { passive: true });
  
    // Mouse support
    touchLayer.addEventListener("mousedown", (e) => handleStart(e.clientX));
    touchLayer.addEventListener("mousemove", (e) => handleMove(e.clientX));
    touchLayer.addEventListener("mouseup", () => {
      isDragging = false;
      xStart = null;
    });
</script>
  
</body>
</html>
